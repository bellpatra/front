"use client";

import React, { createContext, useContext, useState, useEffect, ReactNode } from 'react';

export type Language = 'en' | 'hi' | 'ru';

interface LanguageInfo {
  code: Language;
  name: string;
  flag: string;
  nativeName: string;
}

export const languages: Record<Language, LanguageInfo> = {
  en: {
    code: 'en',
    name: 'English',
    flag: 'üá∫üá∏',
    nativeName: 'English'
  },
  hi: {
    code: 'hi',
    name: 'Hindi',
    flag: 'üáÆüá≥',
    nativeName: '‡§π‡§ø‡§Ç‡§¶‡•Ä'
  },
  ru: {
    code: 'ru',
    name: 'Russian',
    flag: 'üá∑üá∫',
    nativeName: '–†—É—Å—Å–∫–∏–π'
  }
};

// Translations
export const translations = {
  en: {
    dashboard: 'Dashboard',
    orders: 'Orders',
    customers: 'Customers',
    products: 'Products',
    reports: 'Reports',
    analytics: 'Analytics',
    settings: 'Settings',
    userManagement: 'User Management',
    users: 'Users',
    roles: 'Roles',
    permissions: 'Permissions',
    search: 'Search everything',
    searchPlaceholder: 'Search mail and people',
    searchIn: 'Search in',
    searchFrom: 'From',
    searchTo: 'To',
    searchSubject: 'Subject',
    searchKeywords: 'Has keywords',
    searchDateRange: 'Sent',
    searchReadStatus: 'Read status',
    searchHasAttachments: 'Has attachments',
    searchButton: 'Search',
    clearFilters: 'Clear filters',
    recentSearches: 'Recent searches',
    quickActions: 'Quick actions',
    popularSearches: 'Popular searches',
    advancedSearch: 'Advanced search',
    welcome: 'Welcome Back',
    goodMorning: 'Good morning',
    recentActivity: 'Recent Activity',
    totalSales: 'Total Sales',
    totalOrders: 'Total Orders',
    totalUsers: 'Total Users',
    conversionRate: 'Conversion Rate',
    profile: 'Profile',
    logout: 'Logout',
    signOut: 'Sign out',
    myProfile: 'My Profile',
    help: 'Help',
    newItem: 'New Item',
    viewAll: 'View all',
    favorites: 'FAVORITES',
    // Login page
    signin: 'Sign in to BellPatra ERP',
    username: 'Username or Email',
    email: 'Email',
    password: 'Password',
    rememberMe: 'Remember me',
    login: 'Sign In',
    welcomeBack: 'Welcome Back',
    signInToContinue: 'Sign in to continue to your account',
    quickLogin: 'Quick Login',
    scanQRCode: 'Scan QR code with your mobile app',
    stepsToScanQR: 'Steps to scan QR Code',
    openBellpatraApp: 'Open Bellpatra App',
    tapScanOption: 'Tap Scan option available at the bottom',
    pointBellpatraScan: 'Point bellpatra Scan at QR Code to login',
    downloadMobileApp: 'Download Mobile App',
    orContinueWith: 'Or continue with',
    signInWithGoogle: 'Sign in with Google',
    dontHaveAccount: "Don't have an account?",
    signUp: 'Sign up',
    // Theme
    theme: 'Theme',
    light: 'Light',
    dark: 'Dark',
    system: 'System',
    // Language
    language: 'Language',
    english: 'English',
    hindi: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä',
    russian: '–†—É—Å—Å–∫–∏–π',
    // Footer
    poweredBy: 'Powered by',
    copyright: '¬© 2024 BellPatra ERP. All rights reserved.',
    privacyPolicy: 'Privacy Policy',
    termsOfService: 'Terms of Service',
    support: 'Support',
    documentation: 'Documentation',
    version: 'Version 1.0.0'
  },
  hi: {
    dashboard: '‡§°‡•à‡§∂‡§¨‡•ã‡§∞‡•ç‡§°',
    orders: '‡§ë‡§∞‡•ç‡§°‡§∞',
    customers: '‡§ó‡•ç‡§∞‡§æ‡§π‡§ï',
    products: '‡§â‡§§‡•ç‡§™‡§æ‡§¶',
    reports: '‡§∞‡§ø‡§™‡•ã‡§∞‡•ç‡§ü',
    analytics: '‡§µ‡§ø‡§∂‡•ç‡§≤‡•á‡§∑‡§£',
    settings: '‡§∏‡•á‡§ü‡§ø‡§Ç‡§ó‡•ç‡§∏',
    userManagement: '‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§™‡•ç‡§∞‡§¨‡§Ç‡§ß‡§®',
    users: '‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ',
    roles: '‡§≠‡•Ç‡§Æ‡§ø‡§ï‡§æ‡§è‡§Ç',
    permissions: '‡§Ö‡§®‡•Å‡§Æ‡§§‡§ø‡§Ø‡§æ‡§Ç',
    search: '‡§∏‡§¨ ‡§ï‡•Å‡§õ ‡§ñ‡•ã‡§ú‡•á‡§Ç',
    searchPlaceholder: '‡§Æ‡•á‡§≤ ‡§î‡§∞ ‡§≤‡•ã‡§ó ‡§ñ‡•ã‡§ú‡•á‡§Ç',
    searchIn: '‡§Æ‡•á‡§Ç ‡§ñ‡•ã‡§ú‡•á‡§Ç',
    searchFrom: '‡§∏‡•á',
    searchTo: '‡§ï‡•ã',
    searchSubject: '‡§µ‡§ø‡§∑‡§Ø',
    searchKeywords: '‡§ï‡•Ä‡§µ‡§∞‡•ç‡§° ‡§π‡•à',
    searchDateRange: '‡§≠‡•á‡§ú‡§æ ‡§ó‡§Ø‡§æ',
    searchReadStatus: '‡§™‡§¢‡§º‡§®‡•á ‡§ï‡•Ä ‡§∏‡•ç‡§•‡§ø‡§§‡§ø',
    searchHasAttachments: '‡§Ö‡§®‡•Å‡§≤‡§ó‡•ç‡§®‡§ï ‡§π‡•à',
    searchButton: '‡§ñ‡•ã‡§ú‡•á‡§Ç',
    clearFilters: '‡§´‡§ø‡§≤‡•ç‡§ü‡§∞ ‡§∏‡§æ‡§´‡§º ‡§ï‡§∞‡•á‡§Ç',
    recentSearches: '‡§π‡§æ‡§≤ ‡§ï‡•Ä ‡§ñ‡•ã‡§ú‡•á‡§Ç',
    quickActions: '‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§ï‡•ç‡§∞‡§ø‡§Ø‡§æ‡§è‡§Ç',
    popularSearches: '‡§≤‡•ã‡§ï‡§™‡•ç‡§∞‡§ø‡§Ø ‡§ñ‡•ã‡§ú‡•á‡§Ç',
    advancedSearch: '‡§â‡§®‡•ç‡§®‡§§ ‡§ñ‡•ã‡§ú',
    welcome: '‡§µ‡§æ‡§™‡§∏‡•Ä ‡§™‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à',
    goodMorning: '‡§∏‡•Å‡§™‡•ç‡§∞‡§≠‡§æ‡§§',
    recentActivity: '‡§π‡§æ‡§≤ ‡§ï‡•Ä ‡§ó‡§§‡§ø‡§µ‡§ø‡§ß‡§ø',
    totalSales: '‡§ï‡•Å‡§≤ ‡§¨‡§ø‡§ï‡•ç‡§∞‡•Ä',
    totalOrders: '‡§ï‡•Å‡§≤ ‡§ë‡§∞‡•ç‡§°‡§∞',
    totalUsers: '‡§ï‡•Å‡§≤ ‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ',
    conversionRate: '‡§∞‡•Ç‡§™‡§æ‡§Ç‡§§‡§∞‡§£ ‡§¶‡§∞',
    profile: '‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤',
    logout: '‡§≤‡•â‡§ó ‡§Ü‡§â‡§ü',
    signOut: '‡§∏‡§æ‡§á‡§® ‡§Ü‡§â‡§ü',
    myProfile: '‡§Æ‡•á‡§∞‡•Ä ‡§™‡•ç‡§∞‡•ã‡§´‡§º‡§æ‡§á‡§≤',
    help: '‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
    newItem: '‡§®‡§Ø‡§æ ‡§Ü‡§á‡§ü‡§Æ',
    viewAll: '‡§∏‡§≠‡•Ä ‡§¶‡•á‡§ñ‡•á‡§Ç',
    favorites: '‡§™‡§∏‡§Ç‡§¶‡•Ä‡§¶‡§æ',
    // Login page
    signin: 'BellPatra ERP ‡§Æ‡•á‡§Ç ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç',
    username: '‡§â‡§™‡§Ø‡•ã‡§ó‡§ï‡§∞‡•ç‡§§‡§æ ‡§®‡§æ‡§Æ ‡§Ø‡§æ ‡§à‡§Æ‡•á‡§≤',
    email: '‡§à‡§Æ‡•á‡§≤',
    password: '‡§™‡§æ‡§∏‡§µ‡§∞‡•ç‡§°',
    rememberMe: '‡§Æ‡•Å‡§ù‡•á ‡§Ø‡§æ‡§¶ ‡§∞‡§ñ‡•á‡§Ç',
    login: '‡§∏‡§æ‡§á‡§® ‡§á‡§®',
    welcomeBack: '‡§µ‡§æ‡§™‡§∏‡•Ä ‡§™‡§∞ ‡§∏‡•ç‡§µ‡§æ‡§ó‡§§ ‡§π‡•à',
    signInToContinue: '‡§Ö‡§™‡§®‡•á ‡§ñ‡§æ‡§§‡•á ‡§Æ‡•á‡§Ç ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç',
    quickLogin: '‡§§‡•ç‡§µ‡§∞‡§ø‡§§ ‡§≤‡•â‡§ó‡§ø‡§®',
    scanQRCode: '‡§Ö‡§™‡§®‡•á ‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ê‡§™ ‡§∏‡•á QR ‡§ï‡•ã‡§° ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡•á‡§Ç',
    stepsToScanQR: 'QR ‡§ï‡•ã‡§° ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§ö‡§∞‡§£',
    openBellpatraApp: '‡§¨‡•á‡§≤‡§™‡§§‡•ç‡§∞‡§æ ‡§ê‡§™ ‡§ñ‡•ã‡§≤‡•á‡§Ç',
    tapScanOption: '‡§®‡•Ä‡§ö‡•á ‡§â‡§™‡§≤‡§¨‡•ç‡§ß ‡§∏‡•ç‡§ï‡•à‡§® ‡§µ‡§ø‡§ï‡§≤‡•ç‡§™ ‡§™‡§∞ ‡§ü‡•à‡§™ ‡§ï‡§∞‡•á‡§Ç',
    pointBellpatraScan: '‡§≤‡•â‡§ó‡§ø‡§® ‡§ï‡•á ‡§≤‡§ø‡§è QR ‡§ï‡•ã‡§° ‡§™‡§∞ ‡§¨‡•á‡§≤‡§™‡§§‡•ç‡§∞‡§æ ‡§∏‡•ç‡§ï‡•à‡§® ‡§ï‡§æ ‡§®‡§ø‡§∂‡§æ‡§®‡§æ ‡§≤‡§ó‡§æ‡§è‡§Ç',
    downloadMobileApp: '‡§Æ‡•ã‡§¨‡§æ‡§á‡§≤ ‡§ê‡§™ ‡§°‡§æ‡§â‡§®‡§≤‡•ã‡§° ‡§ï‡§∞‡•á‡§Ç',
    orContinueWith: '‡§Ø‡§æ ‡§á‡§∏‡§ï‡•á ‡§∏‡§æ‡§• ‡§ú‡§æ‡§∞‡•Ä ‡§∞‡§ñ‡•á‡§Ç',
    signInWithGoogle: 'Google ‡§ï‡•á ‡§∏‡§æ‡§• ‡§∏‡§æ‡§á‡§® ‡§á‡§® ‡§ï‡§∞‡•á‡§Ç',
    dontHaveAccount: '‡§ñ‡§æ‡§§‡§æ ‡§®‡§π‡•Ä‡§Ç ‡§π‡•à?',
    signUp: '‡§∏‡§æ‡§á‡§® ‡§Ö‡§™ ‡§ï‡§∞‡•á‡§Ç',
    // Theme
    theme: '‡§•‡•Ä‡§Æ',
    light: '‡§≤‡§æ‡§á‡§ü',
    dark: '‡§°‡§æ‡§∞‡•ç‡§ï',
    system: '‡§∏‡§ø‡§∏‡•ç‡§ü‡§Æ',
    // Language
    language: '‡§≠‡§æ‡§∑‡§æ',
    english: 'English',
    hindi: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä',
    russian: '–†—É—Å—Å–∫–∏–π',
    // Footer
    poweredBy: '‡§¶‡•ç‡§µ‡§æ‡§∞‡§æ ‡§∏‡§Ç‡§ö‡§æ‡§≤‡§ø‡§§',
    copyright: '¬© 2024 BellPatra ERP‡•§ ‡§∏‡§≠‡•Ä ‡§Ö‡§ß‡§ø‡§ï‡§æ‡§∞ ‡§∏‡•Å‡§∞‡§ï‡•ç‡§∑‡§ø‡§§‡•§',
    privacyPolicy: '‡§ó‡•ã‡§™‡§®‡•Ä‡§Ø‡§§‡§æ ‡§®‡•Ä‡§§‡§ø',
    termsOfService: '‡§∏‡•á‡§µ‡§æ ‡§ï‡•Ä ‡§∂‡§∞‡•ç‡§§‡•á‡§Ç',
    support: '‡§∏‡§π‡§æ‡§Ø‡§§‡§æ',
    documentation: '‡§¶‡§∏‡•ç‡§§‡§æ‡§µ‡•á‡§ú‡§º‡•Ä‡§ï‡§∞‡§£',
    version: '‡§∏‡§Ç‡§∏‡•ç‡§ï‡§∞‡§£ 1.0.0'
  },
  ru: {
    dashboard: '–ü–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è',
    orders: '–ó–∞–∫–∞–∑—ã',
    customers: '–ö–ª–∏–µ–Ω—Ç—ã',
    products: '–ü—Ä–æ–¥—É–∫—Ç—ã',
    reports: '–û—Ç—á–µ—Ç—ã',
    analytics: '–ê–Ω–∞–ª–∏—Ç–∏–∫–∞',
    settings: '–ù–∞—Å—Ç—Ä–æ–π–∫–∏',
    userManagement: '–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏',
    users: '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏',
    roles: '–†–æ–ª–∏',
    permissions: '–†–∞–∑—Ä–µ—à–µ–Ω–∏—è',
    search: '–ü–æ–∏—Å–∫ –ø–æ –≤—Å–µ–º—É',
    searchPlaceholder: '–ü–æ–∏—Å–∫ –ø–æ—á—Ç—ã –∏ –ª—é–¥–µ–π',
    searchIn: '–ò—Å–∫–∞—Ç—å –≤',
    searchFrom: '–û—Ç',
    searchTo: '–ö–æ–º—É',
    searchSubject: '–¢–µ–º–∞',
    searchKeywords: '–°–æ–¥–µ—Ä–∂–∏—Ç –∫–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞',
    searchDateRange: '–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–æ',
    searchReadStatus: '–°—Ç–∞—Ç—É—Å –ø—Ä–æ—á—Ç–µ–Ω–∏—è',
    searchHasAttachments: '–ï—Å—Ç—å –≤–ª–æ–∂–µ–Ω–∏—è',
    searchButton: '–ü–æ–∏—Å–∫',
    clearFilters: '–û—á–∏—Å—Ç–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä—ã',
    recentSearches: '–ù–µ–¥–∞–≤–Ω–∏–µ –ø–æ–∏—Å–∫–∏',
    quickActions: '–ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è',
    popularSearches: '–ü–æ–ø—É–ª—è—Ä–Ω—ã–µ –ø–æ–∏—Å–∫–∏',
    advancedSearch: '–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–π –ø–æ–∏—Å–∫',
    welcome: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ',
    goodMorning: '–î–æ–±—Ä–æ–µ —É—Ç—Ä–æ',
    recentActivity: '–ü–æ—Å–ª–µ–¥–Ω—è—è –∞–∫—Ç–∏–≤–Ω–æ—Å—Ç—å',
    totalSales: '–û–±—â–∏–µ –ø—Ä–æ–¥–∞–∂–∏',
    totalOrders: '–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤',
    totalUsers: '–í—Å–µ–≥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π',
    conversionRate: '–ö–æ—ç—Ñ—Ñ–∏—Ü–∏–µ–Ω—Ç –∫–æ–Ω–≤–µ—Ä—Å–∏–∏',
    profile: '–ü—Ä–æ—Ñ–∏–ª—å',
    logout: '–í—ã—Ö–æ–¥',
    signOut: '–í—ã–π—Ç–∏',
    myProfile: '–ú–æ–π –ø—Ä–æ—Ñ–∏–ª—å',
    help: '–ü–æ–º–æ—â—å',
    newItem: '–ù–æ–≤—ã–π —ç–ª–µ–º–µ–Ω—Ç',
    viewAll: '–ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –≤—Å–µ',
    favorites: '–ò–ó–ë–†–ê–ù–ù–û–ï',
    // Login page
    signin: '–í–æ–π—Ç–∏ –≤ BellPatra ERP',
    username: '–ò–º—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –∏–ª–∏ Email',
    email: '–≠–ª–µ–∫—Ç—Ä–æ–Ω–Ω–∞—è –ø–æ—á—Ç–∞',
    password: '–ü–∞—Ä–æ–ª—å',
    rememberMe: '–ó–∞–ø–æ–º–Ω–∏—Ç—å –º–µ–Ω—è',
    login: '–í–æ–π—Ç–∏',
    welcomeBack: '–î–æ–±—Ä–æ –ø–æ–∂–∞–ª–æ–≤–∞—Ç—å –æ–±—Ä–∞—Ç–Ω–æ',
    signInToContinue: '–í–æ–π–¥–∏—Ç–µ, —á—Ç–æ–±—ã –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Ä–∞–±–æ—Ç—É —Å –≤–∞—à–µ–π —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å—å—é',
    quickLogin: '–ë—ã—Å—Ç—Ä—ã–π –≤—Ö–æ–¥',
    scanQRCode: '–û—Ç—Å–∫–∞–Ω–∏—Ä—É–π—Ç–µ QR-–∫–æ–¥ —Å –ø–æ–º–æ—â—å—é –º–æ–±–∏–ª—å–Ω–æ–≥–æ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è',
    stepsToScanQR: '–®–∞–≥–∏ –¥–ª—è —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è QR-–∫–æ–¥–∞',
    openBellpatraApp: '–û—Ç–∫—Ä–æ–π—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ Bellpatra',
    tapScanOption: '–ù–∞–∂–º–∏—Ç–µ –Ω–∞ –æ–ø—Ü–∏—é —Å–∫–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏—è –≤–Ω–∏–∑—É',
    pointBellpatraScan: '–ù–∞–≤–µ–¥–∏—Ç–µ —Å–∫–∞–Ω–µ—Ä Bellpatra –Ω–∞ QR-–∫–æ–¥ –¥–ª—è –≤—Ö–æ–¥–∞',
    downloadMobileApp: '–°–∫–∞—á–∞—Ç—å –º–æ–±–∏–ª—å–Ω–æ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ',
    orContinueWith: '–ò–ª–∏ –ø—Ä–æ–¥–æ–ª–∂–∏—Ç—å —Å',
    signInWithGoogle: '–í–æ–π—Ç–∏ —á–µ—Ä–µ–∑ Google',
    dontHaveAccount: '–ù–µ—Ç —É—á–µ—Ç–Ω–æ–π –∑–∞–ø–∏—Å–∏?',
    signUp: '–ó–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞—Ç—å—Å—è',
    // Theme
    theme: '–¢–µ–º–∞',
    light: '–°–≤–µ—Ç–ª–∞—è',
    dark: '–¢–µ–º–Ω–∞—è',
    system: '–°–∏—Å—Ç–µ–º–Ω–∞—è',
    // Language
    language: '–Ø–∑—ã–∫',
    english: 'English',
    hindi: '‡§π‡§ø‡§®‡•ç‡§¶‡•Ä',
    russian: '–†—É—Å—Å–∫–∏–π',
    // Footer
    poweredBy: '–†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞',
    copyright: '¬© 2024 BellPatra ERP. –í—Å–µ –ø—Ä–∞–≤–∞ –∑–∞—â–∏—â–µ–Ω—ã.',
    privacyPolicy: '–ü–æ–ª–∏—Ç–∏–∫–∞ –∫–æ–Ω—Ñ–∏–¥–µ–Ω—Ü–∏–∞–ª—å–Ω–æ—Å—Ç–∏',
    termsOfService: '–£—Å–ª–æ–≤–∏—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è',
    support: '–ü–æ–¥–¥–µ—Ä–∂–∫–∞',
    documentation: '–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è',
    version: '–í–µ—Ä—Å–∏—è 1.0.0'
  }
};

interface LanguageContextType {
  language: Language;
  setLanguage: (language: Language) => void;
  t: (key: keyof typeof translations.en) => string;
  currentLanguage: LanguageInfo;
}

const LanguageContext = createContext<LanguageContextType | undefined>(undefined);

interface LanguageProviderProps {
  children: ReactNode;
}

export function LanguageProvider({ children }: LanguageProviderProps) {
  const [language, setLanguage] = useState<Language>('en');

  // Load saved language from localStorage
  useEffect(() => {
    if (typeof window !== 'undefined') {
      const savedLanguage = localStorage.getItem('language') as Language;
      if (savedLanguage && ['en', 'hi', 'ru'].includes(savedLanguage)) {
        setLanguage(savedLanguage);
      }
    }
  }, []);

  const handleSetLanguage = (newLanguage: Language) => {
    setLanguage(newLanguage);
    if (typeof window !== 'undefined') {
      localStorage.setItem('language', newLanguage);
    }
  };

  const t = (key: keyof typeof translations.en): string => {
    return translations[language][key] || translations.en[key];
  };

  const currentLanguage = languages[language];

  return (
    <LanguageContext.Provider value={{ 
      language, 
      setLanguage: handleSetLanguage, 
      t, 
      currentLanguage 
    }}>
      {children}
    </LanguageContext.Provider>
  );
}

export function useLanguage() {
  const context = useContext(LanguageContext);
  if (context === undefined) {
    throw new Error('useLanguage must be used within a LanguageProvider');
  }
  return context;
}
